import React, { useState } from 'react'
import './SidePanel.css';
import PresetList from './PresetList'
import CustomRouteMaker from './CustomRouteMaker'
import { Add,Search,ArrowBack }  from '@material-ui/icons';
import { Button } from '@material-ui/core';

function getRouteJsonUrl(startLocation, endLocation) {
    // startLocation [lng, lat]
    // endLocation [lng, lat]
    const url = new URL('https://api.openrouteservice.org/v2/directions/cycling-regular');

    const params = {
        api_key: '5b3ce3597851110001cf62484de2cf33999b4e06a16c3242e98d4443',
        start:  startLocation, //userMarker.position.lng() + ',' + userMarker.position.lat(),
        end: endLocation
      };
    Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));
    return url;
}

export default function SidePanel(props) {
    const [chosenRoute, setChosenRoute] = props.handlers
    const [presetList, setPresetList] = useState([{name:'Test Route',
                                                      id: 1,
                                                      area: 'somewhere',
                                                      calories: 400,
                                                      distance: 5320,
                                                      json:{"type":"FeatureCollection","features":[{"bbox":[103.817148,1.325721,103.896792,1.381807],"type":"Feature","properties":{"segments":[{"distance":16219.5,"duration":1567,"steps":[{"distance":80.6,"duration":19.4,"type":11,"instruction":"Head west","name":"-","way_points":[0,1]},{"distance":37.4,"duration":9,"type":0,"instruction":"Turn left","name":"-","way_points":[1,2]},{"distance":262,"duration":52.1,"type":0,"instruction":"Turn left","name":"-","way_points":[2,8]},{"distance":132.3,"duration":35.5,"type":0,"instruction":"Turn left","name":"-","way_points":[8,13]},{"distance":73.2,"duration":17.6,"type":0,"instruction":"Turn left onto Hougang Avenue 10","name":"Hougang Avenue 10","way_points":[13,15]},{"distance":197.5,"duration":36.5,"type":12,"instruction":"Keep left","name":"-","way_points":[15,22]},{"distance":242.6,"duration":30.3,"type":6,"instruction":"Continue straight onto Buangkok Drive","name":"Buangkok Drive","way_points":[22,29]},{"distance":497,"duration":62.2,"type":6,"instruction":"Continue straight onto Buangkok Drive","name":"Buangkok Drive","way_points":[29,40]},{"distance":231.2,"duration":43.8,"type":12,"instruction":"Keep left","name":"-","way_points":[40,48]},{"distance":365.7,"duration":61.7,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[48,63]},{"distance":874.1,"duration":112.5,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[63,79]},{"distance":1976.7,"duration":265.6,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[79,110]},{"distance":411.3,"duration":48,"type":12,"instruction":"Keep left","name":"-","way_points":[110,123]},{"distance":3297.2,"duration":158.6,"type":13,"instruction":"Keep right","name":"-","way_points":[123,159]},{"distance":1731.7,"duration":77.9,"type":6,"instruction":"Continue straight onto Central Expressway, CTE","name":"Central Expressway, CTE","way_points":[159,179]},{"distance":907.2,"duration":109.9,"type":12,"instruction":"Keep left","name":"-","way_points":[179,211]},{"distance":1089.8,"duration":116.4,"type":12,"instruction":"Keep left","name":"-","way_points":[211,229]},{"distance":2272.6,"duration":191,"type":6,"instruction":"Continue straight onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[229,266]},{"distance":1338.4,"duration":99.8,"type":13,"instruction":"Keep right onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[266,284]},{"distance":201,"duration":19.4,"type":13,"instruction":"Keep right onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[284,287]},{"distance":0,"duration":0,"type":10,"instruction":"Arrive at Pan-Island Expressway, PIE, on the right","name":"-","way_points":[287,287]}]}],"summary":{"distance":16219.5,"duration":1567},"way_points":[0,287]},"geometry":{"coordinates":[[103.894535,1.379299],[103.89381,1.379314],[103.89381,1.378978],[103.894211,1.378973],[103.895495,1.37896],[103.895542,1.378937],[103.895558,1.378887],[103.89555,1.378663],[103.895538,1.378322],[103.895669,1.378321],[103.895954,1.378316],[103.8961,1.378313],[103.896648,1.378305],[103.896728,1.378303],[103.896755,1.37862],[103.896792,1.378959],[103.89675,1.379118],[103.89672,1.379211],[103.896622,1.379305],[103.896511,1.379388],[103.896131,1.379517],[103.895518,1.379757],[103.895348,1.379816],[103.895261,1.379845],[103.895015,1.379908],[103.894728,1.379942],[103.894367,1.379932],[103.89371,1.379951],[103.893552,1.379956],[103.893182,1.379973],[103.892934,1.379968],[103.892895,1.379968],[103.892799,1.379963],[103.892735,1.379964],[103.892554,1.379967],[103.891615,1.38001],[103.890972,1.38021],[103.89043,1.380555],[103.889894,1.380988],[103.889481,1.38133],[103.889214,1.381574],[103.889096,1.38162],[103.888969,1.381692],[103.888793,1.3818],[103.888665,1.381807],[103.888483,1.381756],[103.888158,1.381367],[103.888067,1.381256],[103.887665,1.380767],[103.887538,1.380601],[103.887461,1.38052],[103.887403,1.380454],[103.887359,1.380404],[103.887142,1.380138],[103.88704,1.380029],[103.88684,1.379814],[103.886762,1.379748],[103.886643,1.379649],[103.88648,1.379528],[103.886368,1.379469],[103.886111,1.379374],[103.88593,1.37934],[103.885431,1.379306],[103.884949,1.379267],[103.884615,1.379247],[103.884485,1.379242],[103.884426,1.37924],[103.884204,1.379233],[103.883237,1.379183],[103.88238,1.37916],[103.882249,1.379154],[103.881783,1.379125],[103.881511,1.379112],[103.88142,1.379108],[103.881225,1.379098],[103.879137,1.378972],[103.878483,1.378945],[103.877678,1.378915],[103.877437,1.378901],[103.877096,1.378887],[103.876709,1.378871],[103.876578,1.378866],[103.876243,1.378844],[103.875594,1.378808],[103.875517,1.378804],[103.875218,1.378794],[103.874589,1.378764],[103.874194,1.378741],[103.873709,1.378728],[103.873485,1.378722],[103.87281,1.378685],[103.871836,1.378626],[103.87177,1.378625],[103.86992,1.378531],[103.869382,1.378513],[103.868332,1.378482],[103.867292,1.378439],[103.866573,1.378388],[103.866089,1.378353],[103.865446,1.378335],[103.864886,1.378222],[103.864628,1.378171],[103.864042,1.378017],[103.863495,1.377894],[103.862354,1.377567],[103.861176,1.377227],[103.861061,1.377194],[103.859935,1.376889],[103.859799,1.376846],[103.859689,1.376812],[103.859536,1.376765],[103.859448,1.376707],[103.859366,1.376641],[103.859309,1.376578],[103.859257,1.376512],[103.859161,1.376399],[103.859094,1.376247],[103.859068,1.375874],[103.859127,1.375406],[103.859188,1.375002],[103.859266,1.374679],[103.859406,1.374288],[103.859669,1.373672],[103.859807,1.373368],[103.859921,1.373],[103.860249,1.372249],[103.860507,1.371452],[103.860687,1.370925],[103.86082,1.37046],[103.860905,1.370041],[103.860964,1.369653],[103.860988,1.369339],[103.860999,1.368899],[103.860982,1.368527],[103.86095,1.368187],[103.860892,1.367839],[103.860693,1.367123],[103.860461,1.36641],[103.860384,1.366153],[103.859153,1.362798],[103.858906,1.362082],[103.858078,1.359783],[103.857583,1.358238],[103.857517,1.358033],[103.857324,1.35755],[103.857215,1.3572],[103.857076,1.356584],[103.856983,1.355924],[103.85694,1.354972],[103.857086,1.353372],[103.857455,1.352096],[103.857725,1.351243],[103.85826,1.349759],[103.858341,1.349518],[103.858603,1.348738],[103.859038,1.347541],[103.859164,1.347214],[103.859351,1.346665],[103.859665,1.345805],[103.859952,1.345045],[103.860009,1.34487],[103.860861,1.342336],[103.861281,1.341189],[103.86179,1.339826],[103.861908,1.339404],[103.862031,1.338883],[103.86212,1.33836],[103.86213,1.338277],[103.862139,1.338178],[103.862173,1.337561],[103.862194,1.337133],[103.862221,1.336646],[103.862243,1.336287],[103.862256,1.335263],[103.862294,1.334449],[103.862312,1.334159],[103.862351,1.33346],[103.862355,1.333251],[103.862422,1.331567],[103.862424,1.329832],[103.86249,1.329714],[103.862499,1.329629],[103.86248,1.329447],[103.862492,1.32926],[103.86252,1.329066],[103.86258,1.328895],[103.862651,1.328761],[103.86275,1.328664],[103.862929,1.328577],[103.863106,1.328556],[103.863198,1.328564],[103.863303,1.328603],[103.86337,1.328653],[103.863465,1.328754],[103.863563,1.328909],[103.863606,1.329029],[103.863606,1.329183],[103.863565,1.329294],[103.863426,1.329467],[103.863083,1.329763],[103.862897,1.32987],[103.862627,1.330009],[103.862331,1.330138],[103.86202,1.330178],[103.861666,1.330204],[103.861151,1.330176],[103.860427,1.33008],[103.860011,1.329948],[103.859899,1.329913],[103.859832,1.329892],[103.859249,1.329683],[103.858476,1.329356],[103.858219,1.329214],[103.857965,1.329119],[103.857023,1.328875],[103.856431,1.328747],[103.856183,1.328721],[103.855941,1.328737],[103.85582,1.328763],[103.855433,1.328846],[103.854999,1.32896],[103.85454,1.329017],[103.85392,1.329066],[103.852939,1.329188],[103.852501,1.329263],[103.852347,1.329277],[103.852226,1.329287],[103.850418,1.329443],[103.849514,1.32953],[103.848833,1.329582],[103.848696,1.329593],[103.848165,1.329641],[103.846506,1.329691],[103.846043,1.329665],[103.845866,1.329654],[103.84477,1.329591],[103.844503,1.329576],[103.844372,1.329568],[103.843524,1.329528],[103.842894,1.329488],[103.842403,1.329439],[103.841991,1.329366],[103.841733,1.32929],[103.841063,1.329031],[103.840652,1.328846],[103.840271,1.32865],[103.839266,1.328074],[103.838739,1.32775],[103.838253,1.327501],[103.837754,1.327293],[103.837445,1.327182],[103.83725,1.32712],[103.834791,1.326333],[103.834688,1.326301],[103.834379,1.3262],[103.83381,1.326019],[103.833115,1.325824],[103.832913,1.325768],[103.832727,1.325737],[103.832483,1.325721],[103.832223,1.32573],[103.831973,1.325771],[103.831576,1.325852],[103.83136,1.325957],[103.830519,1.326494],[103.829879,1.326706],[103.829371,1.326781],[103.829231,1.326785],[103.828313,1.326653],[103.827352,1.326484],[103.826967,1.3265],[103.82674,1.326511],[103.826658,1.32653],[103.826425,1.326588],[103.826128,1.326701],[103.825755,1.326935],[103.825288,1.327324],[103.824186,1.32846],[103.823822,1.328722],[103.823258,1.329041],[103.822564,1.329378],[103.820297,1.330283],[103.819757,1.330561],[103.819547,1.330676],[103.818696,1.331106],[103.818476,1.331246],[103.817364,1.331923],[103.817148,1.332039]],"type":"LineString"}}],"bbox":[103.817148,1.325721,103.896792,1.381807],"metadata":{"attribution":"openrouteservice.org | OpenStreetMap contributors","service":"routing","timestamp":1598950226853,"query":{"coordinates":[[103.894676,1.379365],[103.817157,1.332056]],"profile":"driving-car","format":"geojson"},"engine":{"version":"6.2.1","build_date":"2020-08-18T08:46:24Z","graph_date":"1970-01-01T00:00:00Z"}}}
                                                     }, 
                                                     {name: 'Same Route',
                                                      id: 2,
                                                      area: 'somewhere2',
                                                      calories: 700,
                                                      distance: 1230,
                                                      json:{"type":"FeatureCollection","features":[{"bbox":[103.817148,1.325721,103.896792,1.381807],"type":"Feature","properties":{"segments":[{"distance":16219.5,"duration":1567,"steps":[{"distance":80.6,"duration":19.4,"type":11,"instruction":"Head west","name":"-","way_points":[0,1]},{"distance":37.4,"duration":9,"type":0,"instruction":"Turn left","name":"-","way_points":[1,2]},{"distance":262,"duration":52.1,"type":0,"instruction":"Turn left","name":"-","way_points":[2,8]},{"distance":132.3,"duration":35.5,"type":0,"instruction":"Turn left","name":"-","way_points":[8,13]},{"distance":73.2,"duration":17.6,"type":0,"instruction":"Turn left onto Hougang Avenue 10","name":"Hougang Avenue 10","way_points":[13,15]},{"distance":197.5,"duration":36.5,"type":12,"instruction":"Keep left","name":"-","way_points":[15,22]},{"distance":242.6,"duration":30.3,"type":6,"instruction":"Continue straight onto Buangkok Drive","name":"Buangkok Drive","way_points":[22,29]},{"distance":497,"duration":62.2,"type":6,"instruction":"Continue straight onto Buangkok Drive","name":"Buangkok Drive","way_points":[29,40]},{"distance":231.2,"duration":43.8,"type":12,"instruction":"Keep left","name":"-","way_points":[40,48]},{"distance":365.7,"duration":61.7,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[48,63]},{"distance":874.1,"duration":112.5,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[63,79]},{"distance":1976.7,"duration":265.6,"type":6,"instruction":"Continue straight onto Buangkok Green","name":"Buangkok Green","way_points":[79,110]},{"distance":411.3,"duration":48,"type":12,"instruction":"Keep left","name":"-","way_points":[110,123]},{"distance":3297.2,"duration":158.6,"type":13,"instruction":"Keep right","name":"-","way_points":[123,159]},{"distance":1731.7,"duration":77.9,"type":6,"instruction":"Continue straight onto Central Expressway, CTE","name":"Central Expressway, CTE","way_points":[159,179]},{"distance":907.2,"duration":109.9,"type":12,"instruction":"Keep left","name":"-","way_points":[179,211]},{"distance":1089.8,"duration":116.4,"type":12,"instruction":"Keep left","name":"-","way_points":[211,229]},{"distance":2272.6,"duration":191,"type":6,"instruction":"Continue straight onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[229,266]},{"distance":1338.4,"duration":99.8,"type":13,"instruction":"Keep right onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[266,284]},{"distance":201,"duration":19.4,"type":13,"instruction":"Keep right onto Pan-Island Expressway, PIE","name":"Pan-Island Expressway, PIE","way_points":[284,287]},{"distance":0,"duration":0,"type":10,"instruction":"Arrive at Pan-Island Expressway, PIE, on the right","name":"-","way_points":[287,287]}]}],"summary":{"distance":16219.5,"duration":1567},"way_points":[0,287]},"geometry":{"coordinates":[[103.894535,1.379299],[103.89381,1.379314],[103.89381,1.378978],[103.894211,1.378973],[103.895495,1.37896],[103.895542,1.378937],[103.895558,1.378887],[103.89555,1.378663],[103.895538,1.378322],[103.895669,1.378321],[103.895954,1.378316],[103.8961,1.378313],[103.896648,1.378305],[103.896728,1.378303],[103.896755,1.37862],[103.896792,1.378959],[103.89675,1.379118],[103.89672,1.379211],[103.896622,1.379305],[103.896511,1.379388],[103.896131,1.379517],[103.895518,1.379757],[103.895348,1.379816],[103.895261,1.379845],[103.895015,1.379908],[103.894728,1.379942],[103.894367,1.379932],[103.89371,1.379951],[103.893552,1.379956],[103.893182,1.379973],[103.892934,1.379968],[103.892895,1.379968],[103.892799,1.379963],[103.892735,1.379964],[103.892554,1.379967],[103.891615,1.38001],[103.890972,1.38021],[103.89043,1.380555],[103.889894,1.380988],[103.889481,1.38133],[103.889214,1.381574],[103.889096,1.38162],[103.888969,1.381692],[103.888793,1.3818],[103.888665,1.381807],[103.888483,1.381756],[103.888158,1.381367],[103.888067,1.381256],[103.887665,1.380767],[103.887538,1.380601],[103.887461,1.38052],[103.887403,1.380454],[103.887359,1.380404],[103.887142,1.380138],[103.88704,1.380029],[103.88684,1.379814],[103.886762,1.379748],[103.886643,1.379649],[103.88648,1.379528],[103.886368,1.379469],[103.886111,1.379374],[103.88593,1.37934],[103.885431,1.379306],[103.884949,1.379267],[103.884615,1.379247],[103.884485,1.379242],[103.884426,1.37924],[103.884204,1.379233],[103.883237,1.379183],[103.88238,1.37916],[103.882249,1.379154],[103.881783,1.379125],[103.881511,1.379112],[103.88142,1.379108],[103.881225,1.379098],[103.879137,1.378972],[103.878483,1.378945],[103.877678,1.378915],[103.877437,1.378901],[103.877096,1.378887],[103.876709,1.378871],[103.876578,1.378866],[103.876243,1.378844],[103.875594,1.378808],[103.875517,1.378804],[103.875218,1.378794],[103.874589,1.378764],[103.874194,1.378741],[103.873709,1.378728],[103.873485,1.378722],[103.87281,1.378685],[103.871836,1.378626],[103.87177,1.378625],[103.86992,1.378531],[103.869382,1.378513],[103.868332,1.378482],[103.867292,1.378439],[103.866573,1.378388],[103.866089,1.378353],[103.865446,1.378335],[103.864886,1.378222],[103.864628,1.378171],[103.864042,1.378017],[103.863495,1.377894],[103.862354,1.377567],[103.861176,1.377227],[103.861061,1.377194],[103.859935,1.376889],[103.859799,1.376846],[103.859689,1.376812],[103.859536,1.376765],[103.859448,1.376707],[103.859366,1.376641],[103.859309,1.376578],[103.859257,1.376512],[103.859161,1.376399],[103.859094,1.376247],[103.859068,1.375874],[103.859127,1.375406],[103.859188,1.375002],[103.859266,1.374679],[103.859406,1.374288],[103.859669,1.373672],[103.859807,1.373368],[103.859921,1.373],[103.860249,1.372249],[103.860507,1.371452],[103.860687,1.370925],[103.86082,1.37046],[103.860905,1.370041],[103.860964,1.369653],[103.860988,1.369339],[103.860999,1.368899],[103.860982,1.368527],[103.86095,1.368187],[103.860892,1.367839],[103.860693,1.367123],[103.860461,1.36641],[103.860384,1.366153],[103.859153,1.362798],[103.858906,1.362082],[103.858078,1.359783],[103.857583,1.358238],[103.857517,1.358033],[103.857324,1.35755],[103.857215,1.3572],[103.857076,1.356584],[103.856983,1.355924],[103.85694,1.354972],[103.857086,1.353372],[103.857455,1.352096],[103.857725,1.351243],[103.85826,1.349759],[103.858341,1.349518],[103.858603,1.348738],[103.859038,1.347541],[103.859164,1.347214],[103.859351,1.346665],[103.859665,1.345805],[103.859952,1.345045],[103.860009,1.34487],[103.860861,1.342336],[103.861281,1.341189],[103.86179,1.339826],[103.861908,1.339404],[103.862031,1.338883],[103.86212,1.33836],[103.86213,1.338277],[103.862139,1.338178],[103.862173,1.337561],[103.862194,1.337133],[103.862221,1.336646],[103.862243,1.336287],[103.862256,1.335263],[103.862294,1.334449],[103.862312,1.334159],[103.862351,1.33346],[103.862355,1.333251],[103.862422,1.331567],[103.862424,1.329832],[103.86249,1.329714],[103.862499,1.329629],[103.86248,1.329447],[103.862492,1.32926],[103.86252,1.329066],[103.86258,1.328895],[103.862651,1.328761],[103.86275,1.328664],[103.862929,1.328577],[103.863106,1.328556],[103.863198,1.328564],[103.863303,1.328603],[103.86337,1.328653],[103.863465,1.328754],[103.863563,1.328909],[103.863606,1.329029],[103.863606,1.329183],[103.863565,1.329294],[103.863426,1.329467],[103.863083,1.329763],[103.862897,1.32987],[103.862627,1.330009],[103.862331,1.330138],[103.86202,1.330178],[103.861666,1.330204],[103.861151,1.330176],[103.860427,1.33008],[103.860011,1.329948],[103.859899,1.329913],[103.859832,1.329892],[103.859249,1.329683],[103.858476,1.329356],[103.858219,1.329214],[103.857965,1.329119],[103.857023,1.328875],[103.856431,1.328747],[103.856183,1.328721],[103.855941,1.328737],[103.85582,1.328763],[103.855433,1.328846],[103.854999,1.32896],[103.85454,1.329017],[103.85392,1.329066],[103.852939,1.329188],[103.852501,1.329263],[103.852347,1.329277],[103.852226,1.329287],[103.850418,1.329443],[103.849514,1.32953],[103.848833,1.329582],[103.848696,1.329593],[103.848165,1.329641],[103.846506,1.329691],[103.846043,1.329665],[103.845866,1.329654],[103.84477,1.329591],[103.844503,1.329576],[103.844372,1.329568],[103.843524,1.329528],[103.842894,1.329488],[103.842403,1.329439],[103.841991,1.329366],[103.841733,1.32929],[103.841063,1.329031],[103.840652,1.328846],[103.840271,1.32865],[103.839266,1.328074],[103.838739,1.32775],[103.838253,1.327501],[103.837754,1.327293],[103.837445,1.327182],[103.83725,1.32712],[103.834791,1.326333],[103.834688,1.326301],[103.834379,1.3262],[103.83381,1.326019],[103.833115,1.325824],[103.832913,1.325768],[103.832727,1.325737],[103.832483,1.325721],[103.832223,1.32573],[103.831973,1.325771],[103.831576,1.325852],[103.83136,1.325957],[103.830519,1.326494],[103.829879,1.326706],[103.829371,1.326781],[103.829231,1.326785],[103.828313,1.326653],[103.827352,1.326484],[103.826967,1.3265],[103.82674,1.326511],[103.826658,1.32653],[103.826425,1.326588],[103.826128,1.326701],[103.825755,1.326935],[103.825288,1.327324],[103.824186,1.32846],[103.823822,1.328722],[103.823258,1.329041],[103.822564,1.329378],[103.820297,1.330283],[103.819757,1.330561],[103.819547,1.330676],[103.818696,1.331106],[103.818476,1.331246],[103.817364,1.331923],[103.817148,1.332039]],"type":"LineString"}}],"bbox":[103.817148,1.325721,103.896792,1.381807],"metadata":{"attribution":"openrouteservice.org | OpenStreetMap contributors","service":"routing","timestamp":1598950226853,"query":{"coordinates":[[103.894676,1.379365],[103.817157,1.332056]],"profile":"driving-car","format":"geojson"},"engine":{"version":"6.2.1","build_date":"2020-08-18T08:46:24Z","graph_date":"1970-01-01T00:00:00Z"}}}
                                                     }])
    const [mode, setMode] = useState('preset')
    const [startLocation, setStartLocation] = useState(null);
    const [endLocation, setEndLocation] = useState(null);

    function handleChangeButton() {
        if (mode === 'preset') setMode('custom')
        else setMode('preset')
        setChosenRoute(null)
        setStartLocation(null)
        setEndLocation(null)
    }

    function handleSearchCustomRoute() {
        if (!startLocation) {
            window.alert("Please enter your start point before proceeding.")
            return
        }
        if (!endLocation) {
            window.alert("Please enter your end point before proceeding.")
            return
        }
        var url = getRouteJsonUrl([startLocation.lng, startLocation.lat], [endLocation.lng, endLocation.lat]);
        fetch(url).then(response => {
            response.json().then(
                routeJson => {
                    console.log(routeJson)
                    setChosenRoute(routeJson)
                }
            )
        })
        console.log('done generating')
        console.log(startLocation)
        console.log(endLocation)
    }

    if (mode === 'preset'){
        return (
            <div id="side-panel-container">
                <div id="side-panel">
                    <div id="side-panel-title">
                        {/* Routes */}
                    </div>
                    <Button id="custom-route-transition-button" onClick={handleChangeButton} variant="contained" color="primary">Custom Route<Add /></Button>
                    <PresetList presetList={presetList} handlers={[chosenRoute,setChosenRoute]}/>
                </div>
            </div>
        )
    } else {
        return (
            <div id="side-panel-container">
                <div id="side-panel">
                    <div id="side-panel-title">
                        {/* Routes */}
                    </div>
                    <Button id="preset-route-transition-button" onClick={handleChangeButton} variant="contained" color="primary"><ArrowBack/>Back</Button>
                    <CustomRouteMaker handlers={[setStartLocation, setEndLocation]}/>
                    <Button id="search-route-button" onClick={handleSearchCustomRoute} color="primary" variant="contained" component="span">
                        <Search />
                    </Button>
                    {/* <PresetList presetList={presetList}/> */}
                </div>
            </div>
        )
    }
}
